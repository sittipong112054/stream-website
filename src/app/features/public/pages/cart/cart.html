<div class="cart-wrapper">
  <div class="cart-bg">
    <div class="cart-page">
      <h2 class="heading">NameProfile‚Äôs Shopping Cart</h2>

      <div class="grid">
        <div class="items">
          <ng-container *ngIf="items().length; else empty">
            <div class="item card" *ngFor="let it of items()">
              <img
                class="thumb"
                [src]="it.cover || 'assets/placeholder-wide.jpg '"
                [alt]="it.title"
              />

              <div class="meta">
                <div class="title">
                  {{ it.title }}
                  <span class="plat" *ngIf="it.platform">{{
                    it.platform
                  }}</span>
                </div>

                <div class="row price">
                  <span class="strike" *ngIf="it.discount"
                    >‡∏ø {{ it.price | number : "1.2-2" }}</span
                  >
                  <span class="final" [class.is-discount]="it.discount"
                    >‡∏ø
                    {{
                      (it.discount
                        ? (it.price * (100 - it.discount)) / 100
                        : it.price
                      ) | number : "1.2-2"
                    }}</span
                  >
                  <span class="off" *ngIf="it.discount"
                    >-{{ it.discount }}%</span
                  >
                </div>

                <div class="controls">
                  <button class="qty" (click)="dec(it)">‚àí</button>
                  <span class="qv">{{ it.qty }}</span>
                  <button class="qty" (click)="inc(it)">+</button>

                  <button class="trash" title="‡∏•‡∏ö" (click)="remove(it)">
                    üóë
                  </button>
                </div>
              </div>
            </div>

            <div class="continue card">
              <a routerLink="/store" class="btn-ghost">Continue Shopping</a>
            </div>
          </ng-container>

          <ng-template #empty>
            <div class="empty card">
              <div>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
              <a routerLink="/store" class="btn">‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡∏ï‡πà‡∏≠</a>
            </div>
          </ng-template>
        </div>

        <aside class="summary card">
          <h3>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h3>

          <div class="coupon">
            <input
              type="text"
              placeholder="‡πÉ‡∏™‡πà‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"
              [value]="code()"
              (input)="code.set($any($event.target).value)"
            />

            <button class="btn" (click)="apply()">ADD</button>
          </div>

          <div class="lines">
            <div class="line">
              <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏î</span>
              <b>‡∏ø {{ subtotal() | number : "1.2-2" }}</b>
            </div>

            <div class="line" *ngIf="coupon() as c">
              <span>‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á ({{ c.code }})</span>
              <b class="discount">- ‡∏ø {{ c.amount | number : "1.2-2" }}</b>
              <button class="remove-coupon" (click)="removeCoupon()">‡∏•‡∏ö</button>
            </div>

            <div class="line total">
              <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°</span>
              <b>‡∏ø {{ total() | number : "1.2-2" }}</b>
            </div>
          </div>

          <button
            class="btn-primary"
            [disabled]="!items().length || isPaying()"
            (click)="checkout()"
          >
            {{ isPaying() ? "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‚Ä¶" : "‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô" }}
          </button>
        </aside>
      </div>
    </div>
  </div>
</div>
